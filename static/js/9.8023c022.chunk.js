(this["webpackJsonpdemo-app"]=this["webpackJsonpdemo-app"]||[]).push([[9],{372:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",(function(){return n}))},478:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",header:"Header_header__2bLYO",slider:"Header_slider__1Fb6w",fadein:"Header_fadein__DXCPa",slideIn:"Header_slideIn__23Kj_",spin:"Header_spin__hxPe2"}},479:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",label:"Label_label__28cPC",resize:"Label_resize__2DMaX",drag:"Label_drag__EG9sg",contents:"Label_contents__2-CYs",hidden:"Label_hidden__1OMKY",dragged:"Label_dragged__WZdox",nodrop:"Label_nodrop__3MllB",fadein:"Label_fadein__3G34-",slideIn:"Label_slideIn__13WPZ",spin:"Label_spin__Rnmhr"}},480:function(e,t,a){e.exports={item:"Item_item__3zCYk"}},481:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",timeline:"Timeline_timeline__XVRzR",content:"Timeline_content__4yK59",rows:"Timeline_rows__Qrz88",fadein:"Timeline_fadein__2YHQx",slideIn:"Timeline_slideIn__3gc6t",spin:"Timeline_spin__6bRm_"}},498:function(e,t,a){"use strict";a.r(t);var n=a(56),r=a(57),i=a(59),d=a(58),o=a(60),s=a(0),c=a.n(s),l=a(21),u=a(361),h=a(363),m=a.n(h),f=a(50),p=a(34),g=a(372),v=a(388),b=a.n(v),_=a(9),y=function(){return _.a.get("timeline.items",{})},w=function(){var e=Math.max.apply(Math,Object(g.a)(Object.values(y()).map((function(e){return e.row}))).concat([0])),t=Math.round(250*Math.random())+5,a=Math.round(250*Math.random())+5,n=b.a.generate(),r={id:n,start:Math.min(t,a),value:Math.random(),end:Math.max(t,a,Math.max(Math.abs(t-a),20)+Math.min(t,a))+10,row:e+1};_.a.set("timeline.items.".concat(n),r)},M=function(){var e=m.a.range(Math.round(5*Math.random())+5).map((function(){var e=Math.round(250*Math.random())+5,t=Math.round(250*Math.random())+5;return{id:b.a.generate(),start:Math.min(e,t),value:Math.random(),end:Math.max(e,t,Math.max(Math.abs(e-t),20)+Math.min(e,t))+10}})).reduce((function(e,t,a){if(0===a)return[Object(p.a)({},t,{row:1})];var n=e[a-1],r=n.end<t.start?n.row:n.row+1;return[].concat(Object(g.a)(e),[Object(p.a)({},t,{row:r})])}),[]).reduce((function(e,t){return Object(p.a)({},e,Object(f.a)({},t.id,t))}),{});_.a.set("timeline.items",e)},E=function(e){return Object.values(y()).find((function(t){return(e.start<=t.end&&e.start>=t.start||e.end<=t.end&&e.end>=t.start||e.start<=t.start&&e.end>=t.end)&&e.row===t.row&&e.id!==t.id}))},O=function(){return _.a.delete("timeline.items")},j=function(e){return _.a.set("timeline.items.".concat(e.id),e)},S=a(138),x=a(351),z=a(359),D=a(478),R=a.n(D),N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleSlider=function(e){(0,a.props.setTimeline)({zoom:e.target.value/100})},a.handleResetClick=function(){(0,a.props.setTimeline)({pos:0,dy:0}),M()},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.zoom;return c.a.createElement("div",{className:R.a.header},c.a.createElement(x.a,{variant:"light",className:R.a.button,onClick:w},c.a.createElement("i",null,"add")),c.a.createElement(x.a,{variant:"light",className:R.a.button,onClick:this.handleResetClick},c.a.createElement("i",null,"refresh")),c.a.createElement(x.a,{variant:"light",onClick:O},c.a.createElement("i",null,"cancel_presentation")),c.a.createElement(z.a.Control,{type:"range",step:10,min:20,max:120,value:100*e,onChange:this.handleSlider,className:R.a.slider}))}}]),t}(s.PureComponent),C=a(2),L=a.n(C),k=a(479),T=a.n(k),W=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleDragRef=function(e){var t=a.props.onDrag;e&&t&&t(e)},a.handleLeftRef=function(e){var t=a.props.onResizeStart;e&&t&&t(e)},a.handleRightRef=function(e){var t=a.props.onResizeEnd;e&&t&&t(e)},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.hasTarget,n=e.isDragged,r=e.startOffset,i=e.endOffset,d=e.hasText;return c.a.createElement("div",{className:L()("card",T.a.label,n&&T.a.dragged,n&&a&&T.a.nodrop),style:{background:"#".concat(t.value.toString(16).substr(-6)),color:"#".concat((1-t.value).toString(16).substr(-6))}},c.a.createElement("div",{className:L()(T.a.contents,!d&&T.a.hidden)},c.a.createElement("span",null,t.start+r),c.a.createElement("span",null,t.end+i)),c.a.createElement("div",{ref:this.handleLeftRef,className:T.a.resize}),c.a.createElement("div",{ref:this.handleDragRef,className:T.a.drag}),c.a.createElement("div",{ref:this.handleRightRef,className:T.a.resize}))}}]),t}(s.PureComponent),H=a(480),A=a.n(H),I=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).dr=0,a.dl=0,a.state={dx:0,dy:0,dl:0,dr:0},a.handleDrag=function(e){if(e){var t=a.props.dragContainer;u.n(e).call(u.d().container(t).on("drag",a.dragMove).on("end",a.dragEnd))}},a.dragMove=function(){var e=a.props,t=e.item,n=e.itemWidth,r=e.itemHeight,i=a.state,d=i.dx,o=i.dy,s=d+u.e.dx,c=o+u.e.dy,l=Math.round(s/n),h=Math.round(c/r);a.setState({dx:s,dy:c,target:E({id:t.id,start:t.start+l,end:t.end+l,row:t.row+h})})},a.dragEnd=function(){var e=a.props,t=e.item,n=e.itemWidth,r=e.itemHeight,i=a.state,d=i.target,o=i.dx,s=i.dy,c=Math.round(o/n),l=Math.round(s/r);if(d)if(Math.abs(d.end-t.start-c)<Math.abs(d.start-t.end-c)){var u=Object(p.a)({},t,{start:d.end+1,end:d.end+1+t.end-t.start,row:t.row+l});E(u)||j(u)}else{var h=Object(p.a)({},t,{start:d.start-1-t.end+t.start,end:d.start-1,row:t.row+l});E(h)||j(h)}else j(Object(p.a)({},t,{start:t.start+c,end:t.end+c,row:t.row+l}));a.setState({target:void 0,dx:0,dy:0})},a.handleResizeStart=function(e){if(e){var t=a.props.dragContainer;u.n(e).call(u.d().container(t).on("drag",a.resizeStartDrag).on("end",a.resizeStartEnd))}},a.resizeStartDrag=function(){var e=a.props,t=e.item,n=e.itemWidth,r=a.state.dl;a.dl=a.dl+u.e.dx;var i=t.start+Math.round(a.dl/n),d=E({id:t.id,start:i,end:t.end,row:t.row});t.end-i<15&&r<a.dl?(a.endDl=a.dl,a.setState({target:d})):d?(a.startDl=a.dl,a.setState({dl:(d.end-t.start+1)*n,target:d})):a.setState({dl:a.dl<a.startDl&&a.dl>a.endDl?r:a.dl,target:d})},a.resizeStartEnd=function(){var e=a.props,t=e.item,n=e.itemWidth,r=a.state.dl;j(Object(p.a)({},t,{start:t.start+Math.round(r/n)})),a.dl=0,a.setState({target:void 0,dl:0})},a.handleResizeEnd=function(e){if(e){var t=a.props.dragContainer;u.n(e).call(u.d().container(t).on("drag",a.resizeEndDrag).on("end",a.resizeEndEnd))}},a.resizeEndDrag=function(){var e=a.props,t=e.item,n=e.itemWidth,r=a.state.dr;a.dr=a.dr+u.e.dx;var i=t.end+Math.round(a.dr/n),d=E({id:t.id,start:t.start,end:i,row:t.row});i-t.start<15&&r>a.dr?(a.startDr=a.dr,a.setState({target:d})):d?(a.endDr=a.dr,a.setState({dr:(d.start-t.end-1)*n,target:d})):a.setState({dr:a.dr<a.startDr&&a.dr>a.endDr?r:a.dr,target:d})},a.resizeEndEnd=function(){var e=a.props,t=e.item,n=e.itemWidth,r=a.state.dr;j(Object(p.a)({},t,{end:t.end+Math.round(r/n)})),a.dr=0,a.setState({target:void 0,dr:0})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemHeight,n=e.itemWidth,r=e.pos,i=this.state,d=i.dx,o=i.dy,s=i.dl,l=i.dr,u=d||o||l||s,h=!!i.target,m=Math.round((d+s)/n),f=Math.round((d+l)/n),p=(t.end-t.start+1)*n-s+l,g=a,v=(t.start-r+1)*n+d+s,b=t.row*a+o,_=p>75;return c.a.createElement("div",{key:t.id,className:A.a.item,style:{height:g,width:p,left:v,top:b}},c.a.createElement(W,{item:t,hasText:_,onDrag:this.handleDrag,onResizeStart:this.handleResizeStart,onResizeEnd:this.handleResizeEnd,hasTarget:h,isDragged:u,startOffset:m,endOffset:f}))}}]),t}(s.PureComponent),P=a(481),Y=a.n(P),K=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={pos:0,height:0,width:0,dx:0,dy:0,columnNo:200,target:void 0,source:void 0,zoom:1},a.initState=function(){var e=a.contentNode.getBoundingClientRect(),t=e.width,n=e.height;a.setState({width:t,height:n})},a.handleTimeline=function(e){a.setState(e)},a.handleDrag=function(e){a.contentNode=e,a.contentNode&&u.n(a.contentNode).call(u.d().on("drag",a.dragMove).on("end",a.dragEnd))},a.dragMove=function(){var e=a.state,t=e.dx,n=e.dy;a.setState({dx:t+u.e.dx,dy:n+u.e.dy})},a.dragEnd=function(){var e=a.state,t=e.dx,n=e.pos,r=e.width,i=e.columnNo,d=e.zoom,o=r/Math.round(i/d),s=Math.round(t/o);a.setState({pos:n-s,dx:0})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.items;m.a.isEmpty(e)&&M(),window.addEventListener("resize",this.initState),window.addEventListener("orientationchange",this.initState),this.initState()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.initState),window.removeEventListener("orientationchange",this.initState)}},{key:"render",value:function(){var e=this,t=this.props.items,a=this.state,n=a.pos,r=a.width,i=a.columnNo,d=a.dx,o=a.dy,s=a.zoom,l=Math.round(i/s),u=function(e,t,a){return Object.values(e).filter((function(e){return e.end>t&&e.start<a&&e}))}(t,n-l,n+2*l),h=r/l;return c.a.createElement(S.a,{className:Y.a.timeline},c.a.createElement(N,{zoom:s,setTimeline:this.handleTimeline}),c.a.createElement("div",{className:Y.a.content,ref:this.handleDrag},c.a.createElement("div",{className:Y.a.rows,style:{marginLeft:d,marginTop:o}},this.contentNode&&u.map((function(t){return c.a.createElement(I,{key:t.id,pos:n,item:t,itemHeight:36,itemWidth:h,dragContainer:e.contentNode})})))))}}]),t}(s.PureComponent);t.default=Object(l.b)((function(){return{items:y()}}))(K)}}]);