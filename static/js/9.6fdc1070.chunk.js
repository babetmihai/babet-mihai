(this["webpackJsonpdemo-app"]=this["webpackJsonpdemo-app"]||[]).push([[9],{367:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(98);var r=a(138);function i(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},470:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",header:"Header_header__2bLYO",slider:"Header_slider__1Fb6w",fadein:"Header_fadein__DXCPa",slideIn:"Header_slideIn__23Kj_",spin:"Header_spin__hxPe2"}},471:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",label:"Label_label__28cPC",resize:"Label_resize__2DMaX",drag:"Label_drag__EG9sg",contents:"Label_contents__2-CYs",hidden:"Label_hidden__1OMKY",dragged:"Label_dragged__WZdox",nodrop:"Label_nodrop__3MllB",fadein:"Label_fadein__3G34-",slideIn:"Label_slideIn__13WPZ",spin:"Label_spin__Rnmhr"}},472:function(e,t,a){e.exports={item:"Item_item__3zCYk"}},473:function(e,t,a){e.exports={primary:"#24292e",secondary:"#e36209",success:"#28a745",danger:"#c33",border:"#e1e4e8",timeline:"Timeline_timeline__XVRzR",content:"Timeline_content__4yK59",rows:"Timeline_rows__Qrz88",fadein:"Timeline_fadein__2YHQx",slideIn:"Timeline_slideIn__3gc6t",spin:"Timeline_spin__6bRm_"}},488:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(56),i=a(58),d=a(57),o=a(0),s=a.n(o),c=a(19),l=a(362),u=a(363),h=a.n(u),m=a(50),f=a(23),p=a(367),g=a(379),v=a.n(g),b=a(8),_=function(){return b.a.get("timeline.items",{})},y=function(){var e=Math.max.apply(Math,Object(p.a)(Object.values(_()).map((function(e){return e.row}))).concat([0])),t=Math.round(250*Math.random())+5,a=Math.round(250*Math.random())+5,n=v.a.generate(),r={id:n,start:Math.min(t,a),value:Math.random(),end:Math.max(t,a,Math.max(Math.abs(t-a),20)+Math.min(t,a))+10,row:e+1};b.a.set("timeline.items.".concat(n),r)},O=function(){var e=h.a.range(Math.round(5*Math.random())+5).map((function(){var e=Math.round(250*Math.random())+5,t=Math.round(250*Math.random())+5;return{id:v.a.generate(),start:Math.min(e,t),value:Math.random(),end:Math.max(e,t,Math.max(Math.abs(e-t),20)+Math.min(e,t))+10}})).reduce((function(e,t,a){if(0===a)return[Object(f.a)(Object(f.a)({},t),{},{row:1})];var n=e[a-1],r=n.end<t.start?n.row:n.row+1;return[].concat(Object(p.a)(e),[Object(f.a)(Object(f.a)({},t),{},{row:r})])}),[]).reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},t.id,t))}),{});b.a.set("timeline.items",e)},w=function(e){return Object.values(_()).find((function(t){return(e.start<=t.end&&e.start>=t.start||e.end<=t.end&&e.end>=t.start||e.start<=t.start&&e.end>=t.end)&&e.row===t.row&&e.id!==t.id}))},M=function(){return b.a.delete("timeline.items")},E=function(e){return b.a.set("timeline.items.".concat(e.id),e)},j=a(137),S=a(352),x=a(360),z=a(470),D=a.n(z),R=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return(e=t.call.apply(t,[this].concat(i))).handleSlider=function(t){(0,e.props.setTimeline)({zoom:t.target.value/100})},e.handleResetClick=function(){(0,e.props.setTimeline)({pos:0,dy:0}),O()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.zoom;return s.a.createElement("div",{className:D.a.header},s.a.createElement(S.a,{variant:"light",className:D.a.button,onClick:y},s.a.createElement("i",null,"add")),s.a.createElement(S.a,{variant:"light",className:D.a.button,onClick:this.handleResetClick},s.a.createElement("i",null,"refresh")),s.a.createElement(S.a,{variant:"light",onClick:M},s.a.createElement("i",null,"cancel_presentation")),s.a.createElement(x.a.Control,{type:"range",step:10,min:20,max:120,value:100*e,onChange:this.handleSlider,className:D.a.slider}))}}]),a}(o.PureComponent),N=a(3),C=a.n(N),L=a(471),k=a.n(L),T=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return(e=t.call.apply(t,[this].concat(i))).handleDragRef=function(t){var a=e.props.onDrag;t&&a&&a(t)},e.handleLeftRef=function(t){var a=e.props.onResizeStart;t&&a&&a(t)},e.handleRightRef=function(t){var a=e.props.onResizeEnd;t&&a&&a(t)},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.hasTarget,n=e.isDragged,r=e.startOffset,i=e.endOffset,d=e.hasText;return s.a.createElement("div",{className:C()("card",k.a.label,n&&k.a.dragged,n&&a&&k.a.nodrop),style:{background:"#".concat(t.value.toString(16).substr(-6)),color:"#".concat((1-t.value).toString(16).substr(-6))}},s.a.createElement("div",{className:C()(k.a.contents,!d&&k.a.hidden)},s.a.createElement("span",null,t.start+r),s.a.createElement("span",null,t.end+i)),s.a.createElement("div",{ref:this.handleLeftRef,className:k.a.resize}),s.a.createElement("div",{ref:this.handleDragRef,className:k.a.drag}),s.a.createElement("div",{ref:this.handleRightRef,className:k.a.resize}))}}]),a}(o.PureComponent),W=a(472),H=a.n(W),I=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return(e=t.call.apply(t,[this].concat(i))).dr=0,e.dl=0,e.state={dx:0,dy:0,dl:0,dr:0},e.handleDrag=function(t){if(t){var a=e.props.dragContainer;l.n(t).call(l.d().container(a).on("drag",e.dragMove).on("end",e.dragEnd))}},e.dragMove=function(){var t=e.props,a=t.item,n=t.itemWidth,r=t.itemHeight,i=e.state,d=i.dx,o=i.dy,s=d+l.e.dx,c=o+l.e.dy,u=Math.round(s/n),h=Math.round(c/r);e.setState({dx:s,dy:c,target:w({id:a.id,start:a.start+u,end:a.end+u,row:a.row+h})})},e.dragEnd=function(){var t=e.props,a=t.item,n=t.itemWidth,r=t.itemHeight,i=e.state,d=i.target,o=i.dx,s=i.dy,c=Math.round(o/n),l=Math.round(s/r);if(d)if(Math.abs(d.end-a.start-c)<Math.abs(d.start-a.end-c)){var u=Object(f.a)(Object(f.a)({},a),{},{start:d.end+1,end:d.end+1+a.end-a.start,row:a.row+l});w(u)||E(u)}else{var h=Object(f.a)(Object(f.a)({},a),{},{start:d.start-1-a.end+a.start,end:d.start-1,row:a.row+l});w(h)||E(h)}else E(Object(f.a)(Object(f.a)({},a),{},{start:a.start+c,end:a.end+c,row:a.row+l}));e.setState({target:void 0,dx:0,dy:0})},e.handleResizeStart=function(t){if(t){var a=e.props.dragContainer;l.n(t).call(l.d().container(a).on("drag",e.resizeStartDrag).on("end",e.resizeStartEnd))}},e.resizeStartDrag=function(){var t=e.props,a=t.item,n=t.itemWidth,r=e.state.dl;e.dl=e.dl+l.e.dx;var i=a.start+Math.round(e.dl/n),d=w({id:a.id,start:i,end:a.end,row:a.row});a.end-i<15&&r<e.dl?(e.endDl=e.dl,e.setState({target:d})):d?(e.startDl=e.dl,e.setState({dl:(d.end-a.start+1)*n,target:d})):e.setState({dl:e.dl<e.startDl&&e.dl>e.endDl?r:e.dl,target:d})},e.resizeStartEnd=function(){var t=e.props,a=t.item,n=t.itemWidth,r=e.state.dl;E(Object(f.a)(Object(f.a)({},a),{},{start:a.start+Math.round(r/n)})),e.dl=0,e.setState({target:void 0,dl:0})},e.handleResizeEnd=function(t){if(t){var a=e.props.dragContainer;l.n(t).call(l.d().container(a).on("drag",e.resizeEndDrag).on("end",e.resizeEndEnd))}},e.resizeEndDrag=function(){var t=e.props,a=t.item,n=t.itemWidth,r=e.state.dr;e.dr=e.dr+l.e.dx;var i=a.end+Math.round(e.dr/n),d=w({id:a.id,start:a.start,end:i,row:a.row});i-a.start<15&&r>e.dr?(e.startDr=e.dr,e.setState({target:d})):d?(e.endDr=e.dr,e.setState({dr:(d.start-a.end-1)*n,target:d})):e.setState({dr:e.dr<e.startDr&&e.dr>e.endDr?r:e.dr,target:d})},e.resizeEndEnd=function(){var t=e.props,a=t.item,n=t.itemWidth,r=e.state.dr;E(Object(f.a)(Object(f.a)({},a),{},{end:a.end+Math.round(r/n)})),e.dr=0,e.setState({target:void 0,dr:0})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.itemHeight,n=e.itemWidth,r=e.pos,i=this.state,d=i.dx,o=i.dy,c=i.dl,l=i.dr,u=d||o||l||c,h=!!i.target,m=Math.round((d+c)/n),f=Math.round((d+l)/n),p=(t.end-t.start+1)*n-c+l,g=a,v=(t.start-r+1)*n+d+c,b=t.row*a+o,_=p>75;return s.a.createElement("div",{key:t.id,className:H.a.item,style:{height:g,width:p,left:v,top:b}},s.a.createElement(T,{item:t,hasText:_,onDrag:this.handleDrag,onResizeStart:this.handleResizeStart,onResizeEnd:this.handleResizeEnd,hasTarget:h,isDragged:u,startOffset:m,endOffset:f}))}}]),a}(o.PureComponent),P=a(473),A=a.n(P),Y=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),d=0;d<r;d++)i[d]=arguments[d];return(e=t.call.apply(t,[this].concat(i))).state={pos:0,height:0,width:0,dx:0,dy:0,columnNo:200,target:void 0,source:void 0,zoom:1},e.initState=function(){var t=e.contentNode.getBoundingClientRect(),a=t.width,n=t.height;e.setState({width:a,height:n})},e.handleTimeline=function(t){e.setState(t)},e.handleDrag=function(t){e.contentNode=t,e.contentNode&&l.n(e.contentNode).call(l.d().on("drag",e.dragMove).on("end",e.dragEnd))},e.dragMove=function(){var t=e.state,a=t.dx,n=t.dy;e.setState({dx:a+l.e.dx,dy:n+l.e.dy})},e.dragEnd=function(){var t=e.state,a=t.dx,n=t.pos,r=t.width,i=t.columnNo,d=t.zoom,o=r/Math.round(i/d),s=Math.round(a/o);e.setState({pos:n-s,dx:0})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.items;h.a.isEmpty(e)&&O(),window.addEventListener("resize",this.initState),window.addEventListener("orientationchange",this.initState),this.initState()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.initState),window.removeEventListener("orientationchange",this.initState)}},{key:"render",value:function(){var e=this,t=this.props.items,a=this.state,n=a.pos,r=a.width,i=a.columnNo,d=a.dx,o=a.dy,c=a.zoom,l=Math.round(i/c),u=function(e,t,a){return Object.values(e).filter((function(e){return e.end>t&&e.start<a&&e}))}(t,n-l,n+2*l),h=r/l;return s.a.createElement(j.a,{className:A.a.timeline},s.a.createElement(R,{zoom:c,setTimeline:this.handleTimeline}),s.a.createElement("div",{className:A.a.content,ref:this.handleDrag},s.a.createElement("div",{className:A.a.rows,style:{marginLeft:d,marginTop:o}},this.contentNode&&u.map((function(t){return s.a.createElement(I,{key:t.id,pos:n,item:t,itemHeight:36,itemWidth:h,dragContainer:e.contentNode})})))))}}]),a}(o.PureComponent);t.default=Object(c.b)((function(){return{items:_()}}))(Y)}}]);